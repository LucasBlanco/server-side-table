{"version":3,"file":"index.js","sources":["../src/datatable/localization.ts","../src/datatable/server-side.tsx","../src/index.tsx"],"sourcesContent":["export const localizationOptions = {\n  textLabels: {\n    body: {\n      noMatch: 'No se han encontrado registros que coincidan con la busqueda',\n      toolTip: 'Ordenar',\n      columnHeaderTooltip: (column: any) => `Orden para ${column.label}`\n    },\n    pagination: {\n      next: 'Proxima',\n      previous: 'Anterior',\n      rowsPerPage: 'Registros por pagina:',\n      displayRows: 'de',\n      jumpToPage: 'Ir a la pagina'\n    },\n    toolbar: {\n      search: 'Buscar',\n      downloadCsv: 'Descargar CSV',\n      print: 'Imprimir',\n      viewColumns: 'Ver columnas',\n      filterTable: 'Filtrar tabla'\n    },\n    filter: {\n      all: 'Todos',\n      title: 'FILTROS',\n      reset: 'LIMPIAR'\n    },\n    viewColumns: {\n      title: 'Ver columnas',\n      titleAria: 'Ver/Ocultar columnas'\n    },\n    selectedRows: {\n      text: 'registro(s) seleccionado',\n      delete: 'Borrar',\n      deleteAria: 'Borrar columnas seleccionadas'\n    }\n  }\n}\n","import {\n  debounceSearchRender,\n  MUIDataTableOptions,\n  MUIDataTableState\n} from 'mui-datatables'\nimport { useEffect, useState } from 'react'\nimport { localizationOptions } from './localization'\n\ninterface ServerSidePaginatorInterface {\n  total: number\n  page: number\n  itemsPerPage: number\n}\ninterface OrderCriteria {\n  name: string\n  direction: 'asc' | 'desc'\n}\ntype ServerSideOrderFn = (x: OrderCriteria) => string\ninterface RequestFnResponse<T> {\n  data: T[]\n  total: number\n}\ntype ServerRequestFn<T> = (params: string) => Promise<RequestFnResponse<T>>\n\ninterface ServerSidePaginationProps {\n  label: string\n  firstPageNro: number\n  itemsPerPageLabel: string\n}\n\nexport const serverSidePaginator = (\n  props: ServerSidePaginationProps = {\n    label: 'page',\n    firstPageNro: 1,\n    itemsPerPageLabel: 'limit'\n  }\n) => {\n  const paginatorInfo: ServerSidePaginatorInterface = {\n    total: 0,\n    page: props.firstPageNro,\n    itemsPerPage: 10\n  }\n\n  const isPageValid = (page: number) => {\n    const { itemsPerPage, total } = paginatorInfo\n    const noUnderflow = page >= props.firstPageNro\n    const noOverflow =\n      total > 0 && itemsPerPage > 0\n        ? Math.ceil(total / itemsPerPage) >= page\n        : true\n    return noUnderflow && noOverflow\n  }\n\n  const getPage = (page: number) => {\n    if (!isPageValid(page)) {\n      throw new Error(`page ${page} is invalid`)\n    }\n    paginatorInfo.page = page\n    return `${props.label}=${page}&${props.itemsPerPageLabel}=${paginatorInfo.itemsPerPage}`\n  }\n\n  const nextPage = () => getPage(paginatorInfo.page + 1)\n\n  const previousPage = () => getPage(paginatorInfo.page - 1)\n\n  const firstPage = () => getPage(props.firstPageNro)\n\n  const lastPage = () =>\n    getPage(Math.ceil(paginatorInfo.total / paginatorInfo.itemsPerPage))\n\n  const setTotal = (total: number) => {\n    paginatorInfo.total = total\n  }\n\n  const setItemsPerPage = (amount: number) => {\n    paginatorInfo.itemsPerPage = amount\n  }\n\n  return {\n    nextPage,\n    previousPage,\n    firstPage,\n    lastPage,\n    getPage,\n    setTotal,\n    setItemsPerPage,\n    firstPageNro: props.firstPageNro,\n    ...paginatorInfo\n  }\n}\n\nexport const serverSideFilter = (queryName: string) => (search: string) =>\n  `${queryName}=${search}`\n\nexport const serverSideOrder = (orderAdapter: ServerSideOrderFn) => (\n  orderCriteria: OrderCriteria\n) => orderAdapter(orderCriteria)\n\nexport const serverSideHandler = (params: {\n  paginator: ReturnType<typeof serverSidePaginator>\n  filter?: ReturnType<typeof serverSideFilter>\n  order?: (x: OrderCriteria) => string\n}) => {\n  let filterCache = ''\n  let orderCache = ''\n  let pageCache = ''\n\n  const createQuery = () =>\n    [pageCache, filterCache, orderCache].filter((x) => !!x).join('&')\n\n  const nextPage = () => {\n    pageCache = params.paginator.nextPage()\n    return createQuery()\n  }\n\n  const previousPage = () => {\n    pageCache = params.paginator.previousPage()\n    return createQuery()\n  }\n\n  const firstPage = () => {\n    pageCache = params.paginator.firstPage()\n    return createQuery()\n  }\n\n  const loadData = firstPage\n\n  const lastPage = () => {\n    pageCache = params.paginator.previousPage()\n    return createQuery()\n  }\n  const getPage = (nro: number) => {\n    pageCache = params.paginator.getPage(nro)\n    return createQuery()\n  }\n  const filter = (search: string) => {\n    filterCache = params.filter ? params.filter(search) : ''\n    return createQuery()\n  }\n  const order = (orderCriteria: OrderCriteria) => {\n    orderCache = params.order ? params.order(orderCriteria) : ''\n    return createQuery()\n  }\n  const reset = () => {\n    filterCache = ''\n    orderCache = ''\n    pageCache = ''\n  }\n\n  return {\n    paginator: {\n      ...params.paginator,\n      nextPage,\n      previousPage,\n      firstPage,\n      lastPage,\n      getPage\n    },\n    loadData,\n    filter,\n    order,\n    reset\n  }\n}\n\nexport const baseTableHandler = serverSideHandler({\n  paginator: serverSidePaginator(),\n  filter: serverSideFilter('filter'),\n  order: serverSideOrder(\n    ({ name, direction }) => `sortBy=${name}&orderBy=${direction}`\n  )\n})\n\nexport const useServerSide = function <T>(props: {\n  requestFn: ServerRequestFn<T>\n  tableHandler: ReturnType<typeof serverSideHandler>\n}) {\n  const [data, setData] = useState<T[]>([])\n  const [total, setTotal] = useState(0)\n  const { requestFn, tableHandler } = props\n\n  const loadData = (params: string) => {\n    const promise = requestFn(params)\n    const updateFn = (res: RequestFnResponse<T>) => {\n      tableHandler.paginator.setTotal(res.total)\n      setData(res.data)\n      setTotal(res.total)\n    }\n    promise.then(updateFn)\n  }\n\n  const reload = () => {\n    const { getPage, page } = tableHandler.paginator\n    loadData(getPage(page))\n  }\n\n  const serverSideOptions: MUIDataTableOptions = {\n    serverSide: true,\n    filter: false,\n    count: total,\n    jumpToPage: true,\n    rowsPerPageOptions: [10, 20, 50, 100],\n    customSearchRender: debounceSearchRender(500),\n    onTableChange: (action: string, tableState: MUIDataTableState) => {\n      if (\n        action !== 'sort' &&\n        action !== 'search' &&\n        action !== 'changePage' &&\n        action !== 'changeRowsPerPage'\n      ) {\n        return\n      }\n      tableHandler.reset()\n      if (Object.keys(tableState.sortOrder).length > 0) {\n        const { name, direction } = tableState.sortOrder\n        tableHandler.order({ name, direction })\n      }\n      if (tableState.searchText) {\n        tableHandler.filter(tableState.searchText)\n      }\n      tableHandler.paginator.setItemsPerPage(tableState.rowsPerPage)\n      loadData(\n        tableHandler.paginator.getPage(\n          tableHandler.paginator.firstPageNro + tableState.page\n        )\n      )\n    }\n  }\n\n  useEffect(() => loadData(tableHandler.paginator.firstPage()), []) // First Load\n\n  const customOptions: MUIDataTableOptions = {\n    ...serverSideOptions,\n    ...localizationOptions\n  }\n\n  return {\n    data,\n    serverSideProps: { options: customOptions },\n    reload\n  }\n}\n","import * as React from 'react'\nimport styles from './styles.module.css'\nimport {\n  useServerSide,\n  serverSideOrder,\n  serverSidePaginator,\n  serverSideHandler,\n  serverSideFilter\n} from './datatable/server-side'\nimport { localizationOptions } from './datatable/localization'\n\ninterface Props {\n  text: string\n}\n\nexport {\n  useServerSide,\n  serverSideOrder,\n  serverSidePaginator,\n  serverSideHandler,\n  serverSideFilter,\n  localizationOptions\n}\n\nexport const ExampleComponent = ({ text }: Props) => {\n  return <div className={styles.test}>Example: {text}</div>\n}\n"],"names":["localizationOptions","textLabels","body","noMatch","toolTip","columnHeaderTooltip","column","label","pagination","next","previous","rowsPerPage","displayRows","jumpToPage","toolbar","search","downloadCsv","print","viewColumns","filterTable","filter","all","title","reset","titleAria","selectedRows","text","deleteAria","serverSidePaginator","props","firstPageNro","itemsPerPageLabel","paginatorInfo","total","page","itemsPerPage","isPageValid","noUnderflow","noOverflow","Math","ceil","getPage","Error","nextPage","previousPage","firstPage","lastPage","setTotal","setItemsPerPage","amount","serverSideFilter","queryName","serverSideOrder","orderAdapter","orderCriteria","serverSideHandler","params","filterCache","orderCache","pageCache","createQuery","x","join","paginator","loadData","nro","order","baseTableHandler","name","direction","useServerSide","useState","data","setData","requestFn","tableHandler","promise","updateFn","res","then","reload","serverSideOptions","serverSide","count","rowsPerPageOptions","customSearchRender","debounceSearchRender","onTableChange","action","tableState","Object","keys","sortOrder","length","searchText","useEffect","customOptions","serverSideProps","options","ExampleComponent","React","className","styles","test"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;IAAaA,mBAAmB,GAAG;AACjCC,EAAAA,UAAU,EAAE;AACVC,IAAAA,IAAI,EAAE;AACJC,MAAAA,OAAO,EAAE,8DADL;AAEJC,MAAAA,OAAO,EAAE,SAFL;AAGJC,MAAAA,mBAAmB,EAAE,6BAACC,MAAD;AAAA,+BAA+BA,MAAM,CAACC,KAAtC;AAAA;AAHjB,KADI;AAMVC,IAAAA,UAAU,EAAE;AACVC,MAAAA,IAAI,EAAE,SADI;AAEVC,MAAAA,QAAQ,EAAE,UAFA;AAGVC,MAAAA,WAAW,EAAE,uBAHH;AAIVC,MAAAA,WAAW,EAAE,IAJH;AAKVC,MAAAA,UAAU,EAAE;AALF,KANF;AAaVC,IAAAA,OAAO,EAAE;AACPC,MAAAA,MAAM,EAAE,QADD;AAEPC,MAAAA,WAAW,EAAE,eAFN;AAGPC,MAAAA,KAAK,EAAE,UAHA;AAIPC,MAAAA,WAAW,EAAE,cAJN;AAKPC,MAAAA,WAAW,EAAE;AALN,KAbC;AAoBVC,IAAAA,MAAM,EAAE;AACNC,MAAAA,GAAG,EAAE,OADC;AAENC,MAAAA,KAAK,EAAE,SAFD;AAGNC,MAAAA,KAAK,EAAE;AAHD,KApBE;AAyBVL,IAAAA,WAAW,EAAE;AACXI,MAAAA,KAAK,EAAE,cADI;AAEXE,MAAAA,SAAS,EAAE;AAFA,KAzBH;AA6BVC,IAAAA,YAAY,EAAE;AACZC,MAAAA,IAAI,EAAE,0BADM;AAEZ,gBAAQ,QAFI;AAGZC,MAAAA,UAAU,EAAE;AAHA;AA7BJ;AADqB,CAA5B;;IC8BMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CACjCC,KADiC;MACjCA;AAAAA,IAAAA,QAAmC;AACjCtB,MAAAA,KAAK,EAAE,MAD0B;AAEjCuB,MAAAA,YAAY,EAAE,CAFmB;AAGjCC,MAAAA,iBAAiB,EAAE;AAHc;;;AAMnC,MAAMC,aAAa,GAAiC;AAClDC,IAAAA,KAAK,EAAE,CAD2C;AAElDC,IAAAA,IAAI,EAAEL,KAAK,CAACC,YAFsC;AAGlDK,IAAAA,YAAY,EAAE;AAHoC,GAApD;;AAMA,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAACF,IAAD;QACVC,eAAwBH,cAAxBG;QAAcF,QAAUD,cAAVC;AACtB,QAAMI,WAAW,GAAGH,IAAI,IAAIL,KAAK,CAACC,YAAlC;AACA,QAAMQ,UAAU,GACdL,KAAK,GAAG,CAAR,IAAaE,YAAY,GAAG,CAA5B,GACII,IAAI,CAACC,IAAL,CAAUP,KAAK,GAAGE,YAAlB,KAAmCD,IADvC,GAEI,IAHN;AAIA,WAAOG,WAAW,IAAIC,UAAtB;AACD,GARD;;AAUA,MAAMG,OAAO,GAAG,SAAVA,OAAU,CAACP,IAAD;AACd,QAAI,CAACE,WAAW,CAACF,IAAD,CAAhB,EAAwB;AACtB,YAAM,IAAIQ,KAAJ,WAAkBR,IAAlB,iBAAN;AACD;;AACDF,IAAAA,aAAa,CAACE,IAAd,GAAqBA,IAArB;AACA,WAAUL,KAAK,CAACtB,KAAhB,SAAyB2B,IAAzB,SAAiCL,KAAK,CAACE,iBAAvC,SAA4DC,aAAa,CAACG,YAA1E;AACD,GAND;;AAQA,MAAMQ,QAAQ,GAAG,SAAXA,QAAW;AAAA,WAAMF,OAAO,CAACT,aAAa,CAACE,IAAd,GAAqB,CAAtB,CAAb;AAAA,GAAjB;;AAEA,MAAMU,YAAY,GAAG,SAAfA,YAAe;AAAA,WAAMH,OAAO,CAACT,aAAa,CAACE,IAAd,GAAqB,CAAtB,CAAb;AAAA,GAArB;;AAEA,MAAMW,SAAS,GAAG,SAAZA,SAAY;AAAA,WAAMJ,OAAO,CAACZ,KAAK,CAACC,YAAP,CAAb;AAAA,GAAlB;;AAEA,MAAMgB,QAAQ,GAAG,SAAXA,QAAW;AAAA,WACfL,OAAO,CAACF,IAAI,CAACC,IAAL,CAAUR,aAAa,CAACC,KAAd,GAAsBD,aAAa,CAACG,YAA9C,CAAD,CADQ;AAAA,GAAjB;;AAGA,MAAMY,QAAQ,GAAG,SAAXA,QAAW,CAACd,KAAD;AACfD,IAAAA,aAAa,CAACC,KAAd,GAAsBA,KAAtB;AACD,GAFD;;AAIA,MAAMe,eAAe,GAAG,SAAlBA,eAAkB,CAACC,MAAD;AACtBjB,IAAAA,aAAa,CAACG,YAAd,GAA6Bc,MAA7B;AACD,GAFD;;AAIA;AACEN,IAAAA,QAAQ,EAARA,QADF;AAEEC,IAAAA,YAAY,EAAZA,YAFF;AAGEC,IAAAA,SAAS,EAATA,SAHF;AAIEC,IAAAA,QAAQ,EAARA,QAJF;AAKEL,IAAAA,OAAO,EAAPA,OALF;AAMEM,IAAAA,QAAQ,EAARA,QANF;AAOEC,IAAAA,eAAe,EAAfA,eAPF;AAQElB,IAAAA,YAAY,EAAED,KAAK,CAACC;AARtB,KASKE,aATL;AAWD,CA3DM;AA6DP,IAAakB,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,SAAD;AAAA,SAAuB,UAACpC,MAAD;AAAA,WAClDoC,SADkD,SACrCpC,MADqC;AAAA,GAAvB;AAAA,CAAzB;AAGP,IAAaqC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,YAAD;AAAA,SAAqC,UAClEC,aADkE;AAAA,WAE/DD,YAAY,CAACC,aAAD,CAFmD;AAAA,GAArC;AAAA,CAAxB;AAIP,IAAaC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,MAAD;AAK/B,MAAIC,WAAW,GAAG,EAAlB;AACA,MAAIC,UAAU,GAAG,EAAjB;AACA,MAAIC,SAAS,GAAG,EAAhB;;AAEA,MAAMC,WAAW,GAAG,SAAdA,WAAc;AAAA,WAClB,CAACD,SAAD,EAAYF,WAAZ,EAAyBC,UAAzB,EAAqCtC,MAArC,CAA4C,UAACyC,CAAD;AAAA,aAAO,CAAC,CAACA,CAAT;AAAA,KAA5C,EAAwDC,IAAxD,CAA6D,GAA7D,CADkB;AAAA,GAApB;;AAGA,MAAMnB,QAAQ,GAAG,SAAXA,QAAW;AACfgB,IAAAA,SAAS,GAAGH,MAAM,CAACO,SAAP,CAAiBpB,QAAjB,EAAZ;AACA,WAAOiB,WAAW,EAAlB;AACD,GAHD;;AAKA,MAAMhB,YAAY,GAAG,SAAfA,YAAe;AACnBe,IAAAA,SAAS,GAAGH,MAAM,CAACO,SAAP,CAAiBnB,YAAjB,EAAZ;AACA,WAAOgB,WAAW,EAAlB;AACD,GAHD;;AAKA,MAAMf,SAAS,GAAG,SAAZA,SAAY;AAChBc,IAAAA,SAAS,GAAGH,MAAM,CAACO,SAAP,CAAiBlB,SAAjB,EAAZ;AACA,WAAOe,WAAW,EAAlB;AACD,GAHD;;AAKA,MAAMI,QAAQ,GAAGnB,SAAjB;;AAEA,MAAMC,QAAQ,GAAG,SAAXA,QAAW;AACfa,IAAAA,SAAS,GAAGH,MAAM,CAACO,SAAP,CAAiBnB,YAAjB,EAAZ;AACA,WAAOgB,WAAW,EAAlB;AACD,GAHD;;AAIA,MAAMnB,OAAO,GAAG,SAAVA,OAAU,CAACwB,GAAD;AACdN,IAAAA,SAAS,GAAGH,MAAM,CAACO,SAAP,CAAiBtB,OAAjB,CAAyBwB,GAAzB,CAAZ;AACA,WAAOL,WAAW,EAAlB;AACD,GAHD;;AAIA,MAAMxC,MAAM,GAAG,SAATA,MAAS,CAACL,MAAD;AACb0C,IAAAA,WAAW,GAAGD,MAAM,CAACpC,MAAP,GAAgBoC,MAAM,CAACpC,MAAP,CAAcL,MAAd,CAAhB,GAAwC,EAAtD;AACA,WAAO6C,WAAW,EAAlB;AACD,GAHD;;AAIA,MAAMM,KAAK,GAAG,SAARA,KAAQ,CAACZ,aAAD;AACZI,IAAAA,UAAU,GAAGF,MAAM,CAACU,KAAP,GAAeV,MAAM,CAACU,KAAP,CAAaZ,aAAb,CAAf,GAA6C,EAA1D;AACA,WAAOM,WAAW,EAAlB;AACD,GAHD;;AAIA,MAAMrC,KAAK,GAAG,SAARA,KAAQ;AACZkC,IAAAA,WAAW,GAAG,EAAd;AACAC,IAAAA,UAAU,GAAG,EAAb;AACAC,IAAAA,SAAS,GAAG,EAAZ;AACD,GAJD;;AAMA,SAAO;AACLI,IAAAA,SAAS,eACJP,MAAM,CAACO,SADH;AAEPpB,MAAAA,QAAQ,EAARA,QAFO;AAGPC,MAAAA,YAAY,EAAZA,YAHO;AAIPC,MAAAA,SAAS,EAATA,SAJO;AAKPC,MAAAA,QAAQ,EAARA,QALO;AAMPL,MAAAA,OAAO,EAAPA;AANO,MADJ;AASLuB,IAAAA,QAAQ,EAARA,QATK;AAUL5C,IAAAA,MAAM,EAANA,MAVK;AAWL8C,IAAAA,KAAK,EAALA,KAXK;AAYL3C,IAAAA,KAAK,EAALA;AAZK,GAAP;AAcD,CAjEM;AAmEP,AAAO,IAAM4C,gBAAgB,GAAGZ,iBAAiB,CAAC;AAChDQ,EAAAA,SAAS,EAAEnC,mBAAmB,EADkB;AAEhDR,EAAAA,MAAM,EAAE8B,gBAAgB,CAAC,QAAD,CAFwB;AAGhDgB,EAAAA,KAAK,EAAEd,eAAe,CACpB;AAAA,QAAGgB,IAAH,QAAGA,IAAH;AAAA,QAASC,SAAT,QAASA,SAAT;AAAA,uBAAmCD,IAAnC,iBAAmDC,SAAnD;AAAA,GADoB;AAH0B,CAAD,CAA1C;AAQP,IAAaC,aAAa,GAAG,SAAhBA,aAAgB,CAAazC,KAAb;kBAIH0C,cAAQ,CAAM,EAAN;MAAzBC;MAAMC;;mBACaF,cAAQ,CAAC,CAAD;MAA3BtC;MAAOc;;MACN2B,YAA4B7C,MAA5B6C;MAAWC,eAAiB9C,MAAjB8C;;AAEnB,MAAMX,QAAQ,GAAG,SAAXA,QAAW,CAACR,MAAD;AACf,QAAMoB,OAAO,GAAGF,SAAS,CAAClB,MAAD,CAAzB;;AACA,QAAMqB,QAAQ,GAAG,SAAXA,QAAW,CAACC,GAAD;AACfH,MAAAA,YAAY,CAACZ,SAAb,CAAuBhB,QAAvB,CAAgC+B,GAAG,CAAC7C,KAApC;AACAwC,MAAAA,OAAO,CAACK,GAAG,CAACN,IAAL,CAAP;AACAzB,MAAAA,QAAQ,CAAC+B,GAAG,CAAC7C,KAAL,CAAR;AACD,KAJD;;AAKA2C,IAAAA,OAAO,CAACG,IAAR,CAAaF,QAAb;AACD,GARD;;AAUA,MAAMG,MAAM,GAAG,SAATA,MAAS;gCACaL,YAAY,CAACZ;QAA/BtB,gCAAAA;QAASP,6BAAAA;AACjB8B,IAAAA,QAAQ,CAACvB,OAAO,CAACP,IAAD,CAAR,CAAR;AACD,GAHD;;AAKA,MAAM+C,iBAAiB,GAAwB;AAC7CC,IAAAA,UAAU,EAAE,IADiC;AAE7C9D,IAAAA,MAAM,EAAE,KAFqC;AAG7C+D,IAAAA,KAAK,EAAElD,KAHsC;AAI7CpB,IAAAA,UAAU,EAAE,IAJiC;AAK7CuE,IAAAA,kBAAkB,EAAE,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,GAAb,CALyB;AAM7CC,IAAAA,kBAAkB,EAAEC,kCAAoB,CAAC,GAAD,CANK;AAO7CC,IAAAA,aAAa,EAAE,uBAACC,MAAD,EAAiBC,UAAjB;AACb,UACED,MAAM,KAAK,MAAX,IACAA,MAAM,KAAK,QADX,IAEAA,MAAM,KAAK,YAFX,IAGAA,MAAM,KAAK,mBAJb,EAKE;AACA;AACD;;AACDb,MAAAA,YAAY,CAACpD,KAAb;;AACA,UAAImE,MAAM,CAACC,IAAP,CAAYF,UAAU,CAACG,SAAvB,EAAkCC,MAAlC,GAA2C,CAA/C,EAAkD;AAAA,oCACpBJ,UAAU,CAACG,SADS;AAAA,YACxCxB,IADwC,yBACxCA,IADwC;AAAA,YAClCC,SADkC,yBAClCA,SADkC;AAEhDM,QAAAA,YAAY,CAACT,KAAb,CAAmB;AAAEE,UAAAA,IAAI,EAAJA,IAAF;AAAQC,UAAAA,SAAS,EAATA;AAAR,SAAnB;AACD;;AACD,UAAIoB,UAAU,CAACK,UAAf,EAA2B;AACzBnB,QAAAA,YAAY,CAACvD,MAAb,CAAoBqE,UAAU,CAACK,UAA/B;AACD;;AACDnB,MAAAA,YAAY,CAACZ,SAAb,CAAuBf,eAAvB,CAAuCyC,UAAU,CAAC9E,WAAlD;AACAqD,MAAAA,QAAQ,CACNW,YAAY,CAACZ,SAAb,CAAuBtB,OAAvB,CACEkC,YAAY,CAACZ,SAAb,CAAuBjC,YAAvB,GAAsC2D,UAAU,CAACvD,IADnD,CADM,CAAR;AAKD;AA9B4C,GAA/C;AAiCA6D,EAAAA,eAAS,CAAC;AAAA,WAAM/B,QAAQ,CAACW,YAAY,CAACZ,SAAb,CAAuBlB,SAAvB,EAAD,CAAd;AAAA,GAAD,EAAqD,EAArD,CAAT;;AAEA,MAAMmD,aAAa,gBACdf,iBADc,EAEdjF,mBAFc,CAAnB;;AAKA,SAAO;AACLwE,IAAAA,IAAI,EAAJA,IADK;AAELyB,IAAAA,eAAe,EAAE;AAAEC,MAAAA,OAAO,EAAEF;AAAX,KAFZ;AAGLhB,IAAAA,MAAM,EAANA;AAHK,GAAP;AAKD,CApEM;;ICrJMmB,gBAAgB,GAAG,SAAnBA,gBAAmB;MAAGzE,YAAAA;AACjC,SAAO0E,mBAAA,MAAA;AAAKC,IAAAA,SAAS,EAAEC,MAAM,CAACC;GAAvB,aAAA,EAAuC7E,IAAvC,CAAP;AACD,CAFM;;;;;;;;;;"}